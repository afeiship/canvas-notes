<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Canvas-Rect</title>
  </head>
  <body>
    <canvas
      id="myCanvas"
      width="200"
      height="100"
      style="border:1px solid #c3c3c3;"
    >
      您的浏览器不支持 HTML5 canvas 标签。
    </canvas>

    <script>
      // http://www.w3school.com.cn/tags/html_ref_canvas.asp
      var c = document.getElementById("myCanvas");
      // var ctx = c.getContext("2d");
      // ctx.fillRect(0, 0, 120, 75);

      function TChart(inCanvas) {
        this.canvas = inCanvas;
        this.context = inCanvas.getContext("2d");
      }

      // init:
      TChart.init = function(inCanvas){
        return new TChart(inCanvas);
      }
      
      // methods: fillRect:
      TChart.prototype.fillRect = function(inOptions, inCallback) {
        inCallback.call(this, this.context);
        this.context.fillRect(
          inOptions.x,
          inOptions.y,
          inOptions.width,
          inOptions.height
        );
      };

      // May be a property:
      TChart.prototype.fillStyle = function(inStyle){
        this.context.fillStyle = inStyle;
      };

      var tInstance = TChart.init(c);

      // elements:
      tInstance.fillRect(
        {
          x: 0,
          y: 0,
          width: 120,
          height: 75
        },
        function(context) {
          console.log(this)
          this.fillStyle("#0000ff");
        }
      );
    </script>
  </body>
</html>
